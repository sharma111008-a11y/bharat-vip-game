<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bharat VIP - Final Edition</title>
    <style>
        :root { --gold: #d4af37; --dragon: #ff3131; --tiger: #3186ff; --neon: #39ff14; --table: #074a1e; }
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Arial', sans-serif; }
        body { background: #000; color: #fff; overflow: hidden; height: 100vh; }

        /* History Record Bar */
        .record-bar { height: 35px; background: #111; display: flex; align-items: center; gap: 5px; padding: 5px; border-bottom: 1px solid #333; overflow-x: auto; scrollbar-width: none; }
        .dot { min-width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; flex-shrink: 0; border: 1px solid #fff; }

        .header-top { display: flex; justify-content: space-between; align-items: center; padding: 8px; background: #000; border-bottom: 1px solid var(--gold); }
        .btn-action { background: var(--neon); color: #000; border: none; padding: 5px 12px; border-radius: 4px; font-weight: bold; font-size: 11px; }

        .table { height: 170px; margin: 10px; border: 3px solid var(--gold); border-radius: 20px; background: radial-gradient(circle, var(--table), #002200); position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .card { width: 45px; height: 65px; background: #fff; color: #000; border-radius: 5px; font-weight: bold; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .card-red { background: var(--dragon) !important; border: 2px solid #fff; color: transparent !important; }
        #timer { position: absolute; top: 10px; right: 15px; color: var(--neon); font-weight: bold; }

        .bot-strip { height: 25px; background: rgba(0,0,0,0.7); display: flex; align-items: center; gap: 15px; padding: 0 10px; font-size: 10px; color: var(--gold); overflow: hidden; }

        .grid { display: flex; gap: 6px; padding: 6px; height: 140px; }
        .box { flex: 1; border: 1px solid #444; border-radius: 12px; position: relative; background: #0a0a0a; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 8px; }
        .chip-layer { position: absolute; inset: 0; pointer-events: none; overflow: hidden; }
        .chip-v { position: absolute; width: 20px; height: 20px; border-radius: 50%; border: 1px solid #fff; font-size: 7px; color: #fff; font-weight: bold; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px #000; animation: drop 0.3s ease-out; }
        @keyframes drop { from { transform: translateY(-30px); } to { transform: translateY(0); } }

        .chip-bar { display: flex; justify-content: space-around; align-items: center; position: fixed; bottom: 0; width: 100%; height: 80px; background: #000; border-top: 2px solid var(--gold); }
        .c-item { width: 40px; height: 40px; border-radius: 50%; border: 2px solid #fff; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: bold; cursor: pointer; color: #fff; }
        .active { border-color: var(--neon); transform: scale(1.1); }
    </style>
</head>
<body>

<div id="lobby" style="position:fixed; inset:0; background:#000; z-index:6000; display:flex; flex-direction:column; align-items:center; justify-content:center;">
    <h1 style="color:var(--gold); margin-bottom:40px;">BHARAT VIP</h1>
    <button onclick="startGame('AB')" class="btn-action" style="width:180px; padding:12px; margin:10px;">ANDAR BAHAR</button>
    <button onclick="startGame('DT')" class="btn-action" style="width:180px; padding:12px; margin:10px;">DRAGON TIGER</button>
</div>

<div id="gameUI" style="display:none;">
    <div class="record-bar" id="hist-row"></div>
    <div class="bot-strip" id="bot-live"></div>
    <div class="header-top">
        <button class="btn-action">DEPOSIT</button>
        <div style="color:var(--neon); font-weight:bold;">â‚¹<span id="bal-val">1,000,000</span></div>
        <button class="btn-action" style="background:#fff;">WITHDRAW</button>
    </div>

    <div class="table">
        <div id="timer">15</div>
        <div id="j-area" style="margin-bottom:10px;"><div id="j-card" class="card card-red">?</div></div>
        <div style="display:flex; gap:35px;">
            <div id="card-l" class="card card-red">?</div>
            <div id="card-r" class="card card-red">?</div>
        </div>
    </div>

    <div class="grid">
        <div class="box" onclick="placeBet('L')">
            <div class="chip-layer" id="layer-L"></div>
            <div id="txt-l" style="color:var(--dragon); font-weight:bold;">SIDE L</div>
            <div style="color:var(--neon); font-size:11px;" id="cnt-l">â‚¹0</div>
        </div>
        <div class="box" id="box-m" style="flex:0.6;" onclick="placeBet('M')">
            <div class="chip-layer" id="layer-M"></div>
            <div style="font-size:12px;">TAI</div>
            <div style="color:var(--neon); font-size:11px;" id="cnt-m">â‚¹0</div>
        </div>
        <div class="box" onclick="placeBet('R')">
            <div class="chip-layer" id="layer-R"></div>
            <div id="txt-r" style="color:var(--tiger); font-weight:bold;">SIDE R</div>
            <div style="color:var(--neon); font-size:11px;" id="cnt-r">â‚¹0</div>
        </div>
    </div>

    <div class="chip-bar">
        <div class="c-item" onclick="selC(10,this)" style="background:#444">10</div>
        <div class="c-item" onclick="selC(100,this)" style="background:#2980b9">100</div>
        <div class="c-item" onclick="selC(500,this)" style="background:#8e44ad">500</div>
        <div class="c-item active" onclick="selC(1000,this)" style="background:#27ae60">1K</div>
        <div class="c-item" onclick="selC(5000,this)" style="background:#e67e22">5K</div>
        <div class="c-item" onclick="adminT()" style="background:#e74c3c">10K</div>
    </div>
</div>

<script>
    let balance = 1000000, mode = "", chip = 1000, canBet = false;
    let pool = {L:0, M:0, R:0}, myBet = {L:0, M:0, R:0};
    const names = ["Ram", "Ali", "Sam", "Viru", "Deep", "Raj", "Sona", "Kanu"];
    const cards = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];

    function startGame(m) {
        mode = m; document.getElementById('lobby').style.display='none'; document.getElementById('gameUI').style.display='block';
        if(m==='AB') { 
            document.getElementById('j-area').style.display='block'; document.getElementById('box-m').style.display='none';
            document.getElementById('txt-l').innerText="ANDAR"; document.getElementById('txt-r').innerText="BAHAR";
        } else {
            document.getElementById('j-area').style.display='none'; document.getElementById('box-m').style.display='flex';
            document.getElementById('txt-l').innerText="DRAGON"; document.getElementById('txt-r').innerText="TIGER";
        }
        mainLoop();
    }

    async function mainLoop() {
        while(true) {
            canBet=true; pool={L:0,M:0,R:0}; myBet={L:0,M:0,R:0}; resetUI();
            let joker = Math.floor(Math.random()*13);
            if(mode==='AB') renderC('j-card', joker);

            let botInt = setInterval(() => {
                if(!canBet) return;
                let side = (mode==='DT')?['L','R','M'][Math.floor(Math.random()*3)] : (Math.random()>0.5?'L':'R');
                let amt = [10, 100, 500, 1000][Math.floor(Math.random()*4)];
                
                // ðŸ”¥ TAI LIMIT CHECK (Max 5000)
                if(side==='M' && (pool.M + amt) > 5000) return;

                pool[side] += amt; dropChip(side, amt); updateUI();
                let bStr = document.getElementById('bot-live');
                let s = document.createElement('span'); s.innerHTML = `ðŸ‘¤ ${names[Math.floor(Math.random()*8)]}: â‚¹${amt}`;
                bStr.prepend(s); if(bStr.children.length>5) bStr.lastChild.remove();
            }, 300);

            for(let i=15; i>=0; i--) { document.getElementById('timer').innerText=i; await new Promise(r=>setTimeout(r,1000)); }
            canBet=false; clearInterval(botInt);

            let win = "";
            if(mode==='DT') {
                let v1 = Math.floor(Math.random()*13), v2 = Math.floor(Math.random()*13);
                renderC('card-l', v1); await new Promise(r=>setTimeout(r,1200)); // Dhire speed
                renderC('card-r', v2); win = v1 > v2 ? 'L' : (v2 > v1 ? 'R' : 'M');
            } else {
                let matched = false, turn = 'L';
                while(!matched) {
                    let v = Math.floor(Math.random()*13);
                    renderC(turn==='L'?'card-l':'card-r', v);
                    if(v === joker) { win = turn; matched = true; }
                    else { turn = (turn==='L'?'R':'L'); await new Promise(r => setTimeout(r, 1000)); } // Dhire speed
                }
            }
            if(myBet[win]>0) balance += (myBet[win]*1.95);
            addHist(win); updateUI(); await new Promise(r=>setTimeout(r,4000));
        }
    }

    function placeBet(s) {
        if(canBet && balance >= chip) {
            if(s==='M' && (myBet.M + chip) > 5000) return alert("TAI Limit â‚¹5000!");
            balance -= chip; pool[s] += chip; myBet[s] += chip;
            dropChip(s, chip); updateUI();
        }
    }

    function addHist(w) {
        const row = document.getElementById('hist-row'); const d = document.createElement('div'); d.className = 'dot';
        d.innerText = mode==='AB' ? (w==='L'?'A':'B') : (w==='L'?'D':(w==='R'?'T':'Ti'));
        d.style.background = w==='L'?'var(--dragon)':(w==='R'?'var(--tiger)':'var(--gold)');
        row.prepend(d); if(row.children.length>20) row.lastChild.remove();
    }

    function dropChip(side, val) {
        const layer = document.getElementById('layer-'+side);
        const c = document.createElement('div'); c.className = 'chip-v';
        const colors = {10:'#444', 100:'#2980b9', 500:'#8e44ad', 1000:'#27ae60', 5000:'#e67e22'};
        c.style.background = colors[val] || 'var(--gold)';
        c.style.left = Math.random()*70+5+"%"; c.style.top = Math.random()*60+5+"%";
        c.innerText = val >= 1000 ? (val/1000)+'K' : val;
        layer.appendChild(c);
    }

    function renderC(id, v) {
        const el = document.getElementById(id), suits=['â™¥','â™¦','â™£','â™ '], s=suits[Math.floor(Math.random()*4)];
        el.classList.remove('card-red'); el.style.color = (s==='â™¥'||s==='â™¦')?'red':'black';
        el.innerHTML = `<div>${cards[v]}</div><div>${s}</div>`;
    }

    function updateUI() {
        document.getElementById('cnt-l').innerText="â‚¹"+pool.L;
        document.getElementById('cnt-m').innerText="â‚¹"+pool.M;
        document.getElementById('cnt-r').innerText="â‚¹"+pool.R;
        document.getElementById('bal-val').innerText=balance.toLocaleString();
    }

    function resetUI() {
        document.querySelectorAll('.chip-layer').forEach(l => l.innerHTML='');
        document.querySelectorAll('.card').forEach(c => { c.innerText='?'; c.classList.add('card-red'); });
    }

    function selC(v,e) { chip=v; document.querySelectorAll('.c-item').forEach(i=>i.classList.remove('active')); e.classList.add('active'); }
    function adminT() { if(prompt("Pass:") === "J1a2y3a4") alert("Admin Control Active"); }
</script>
</body>
</html>
